def fazer_contagem(self):
    contagem_total = 0
    while True:
        ret, self.frame = self.captura.read()
        if self.frame is None:
            break

        roi = self.selecao_roi.selecionar_area(self.frame)
        roi_tons_cinza = cv2.cvtColor(roi, cv2.COLOR_BGR2GRAY)
        roi_blur = cv2.GaussianBlur(roi_tons_cinza, (5, 5), 5)

        subtraido = self.subtracao_fundo.aplicar_subtracao(roi_blur)
        
        dilatado = self.aplicar_filtros(subtraido)

        self.selecao_roi.desenhar_linhas(self.frame)

        deteccoes = self.deteccao_veiculo.detectar_veiculo(self.frame, dilatado)

        
        contagem_frame = len(deteccoes)
        contagem_total += contagem_frame

        texto_contagem = f"Carros detectados: {contagem_total}"
        self.inserir_texto_na_tela(self.frame, texto_contagem)

        cv2.imshow('Video c/ filtros', dilatado)
        cv2.imshow("ROI", roi)
        cv2.imshow("Frame", self.frame)

        if cv2.waitKey(1) == ord('q'):  
            break

    self.captura.release()
    cv2.destroyAllWindows()

    return contagem_total
